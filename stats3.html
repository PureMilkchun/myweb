<!DOCTYPE html>
<html>
<head>
    <title>è®¿é—®ç»Ÿè®¡ - PureMilk</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        /* ç»§æ‰¿ä¸»ç«™æ ·å¼ */
        :root {
            --èƒŒæ™¯è‰²: #f0f0f0;
            --æ–‡å­—è‰²: #333;
            --å¼ºè°ƒè‰²: #ff770f;
            --å¡ç‰‡é˜´å½±: 0 2px 12px rgba(0,0,0,0.08);
            --å¼ºè°ƒè‰²-rgb: 255, 71, 87;
        }

        [data-theme="dark"] {
            --èƒŒæ™¯è‰²: #1a1a1a;
            --æ–‡å­—è‰²: #fff;
            --å¼ºè°ƒè‰²: #2ed573;
            --å¡ç‰‡é˜´å½±: 0 2px 12px rgba(0,0,0,0.3);
            --å¼ºè°ƒè‰²-rgb: 46, 213, 115;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: var(--èƒŒæ™¯è‰²);
            color: var(--æ–‡å­—è‰²);
            transition: background 0.3s, color 0.3s;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        .main-content {
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.8s cubic-bezier(0.33, 1, 0.68, 1);
        }

        body.ready .main-content {
            opacity: 1;
            transform: translateY(0);
        }

            .ä¸»é¢˜åˆ‡æ¢ {
            position: fixed;
            top: 25px;
            right: 25px;
            padding: 12px 20px;
            border: 2px solid var(--å¼ºè°ƒè‰²);
            background: rgba(var(--å¼ºè°ƒè‰²-rgb), 0.1);
            color: var(--å¼ºè°ƒè‰²) !important;
            border-radius: 30px;
            cursor: pointer;
            z-index: 1000;
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            font-weight: 600;
            letter-spacing: 0.5px;
            backdrop-filter: blur(6px);
            box-shadow: 
                0 4px 15px rgba(var(--å¼ºè°ƒè‰²-rgb), 0.15),
                0 0 0 1px rgba(255,255,255,0.1) inset;
            transform: translateZ(0);
        }
        .ä¸»é¢˜åˆ‡æ¢:hover {
            background: rgba(var(--å¼ºè°ƒè‰²-rgb), 0.2);
            transform: translateY(-2px) scale(1.05);
            box-shadow: 
                0 6px 25px rgba(var(--å¼ºè°ƒè‰²-rgb), 0.25),
                0 0 0 1px rgba(255,255,255,0.2) inset;
        }
        .ä¸»é¢˜åˆ‡æ¢:active {
            transform: scale(0.95);
            transition-duration: 0.1s;
        }
        .ä¸»é¢˜åˆ‡æ¢::before {
            content: "ğŸŒ“";
            display: inline-block;
            margin-right: 8px;
            font-size: 1.1em;
            transition: transform 0.3s ease;
        }
        .ä¸»é¢˜åˆ‡æ¢:hover::before {
            transform: rotate(15deg);
        }
        [data-theme="dark"] .ä¸»é¢˜åˆ‡æ¢ {
            border-color: rgba(255,255,255,0.3);
            background: rgba(255,255,255,0.05);
            box-shadow: 
                0 4px 15px rgba(0,0,0,0.3),
                0 0 0 1px rgba(255,255,255,0.05) inset;
        }
        [data-theme="dark"] .ä¸»é¢˜åˆ‡æ¢:hover {
            background: rgba(255,255,255,0.1);
            box-shadow: 
                0 6px 25px rgba(0,0,0,0.4),
                0 0 0 1px rgba(255,255,255,0.1) inset;
        }


        .å¡ç‰‡ {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
            box-shadow: var(--å¡ç‰‡é˜´å½±);
            transition: all 0.3s;
        }

        /* ç»Ÿè®¡å›¾å®¹å™¨ */
        .chart-container {
            position: relative;
            width: 100%;
            height: 400px;
            margin: 20px 0;
            overflow: visible;
        }

        /* æŠ˜çº¿åŠ¨ç”» */
        .chart-line {
            fill: none;
            stroke: var(--å¼ºè°ƒè‰²);
            stroke-width: 3;
            stroke-linecap: round;
            stroke-dasharray: 1000;
            stroke-dashoffset: 1000;
            animation: draw 1.5s ease-out forwards;
        }

        .data-point {
            opacity: 0;
            animation: fadeInUp 0.5s ease-out forwards;
        }

        /* åæ ‡è½´æ ·å¼ */
        .axis text {
            fill: var(--æ–‡å­—è‰²);
            font-size: 12px;
            opacity: 0.8;
        }

        .axis line {
            stroke: var(--æ–‡å­—è‰²);
            opacity: 0.2;
        }

        .axis path {
            display: none;
        }

        /* æ‚¬æµ®æç¤º */
        .tooltip {
            position: absolute;
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.2s;
            font-size: 14px;
            transform: translate(-50%, -100%);
        }

        @keyframes draw {
            to { stroke-dashoffset: 0; }
        }

        @keyframes fadeInUp {
            to { opacity: 1; transform: translateY(0); }
        }

        @media (max-width: 768px) {
            .chart-container {
                height: 300px;
            }
        }
        /* è¿”å›æŒ‰é’®æ ·å¼ */
        .è¿”å›æŒ‰é’® {
            position: fixed;
            bottom: 25px;
            left: 25px;
            padding: 12px 20px;
            border: 2px solid var(--å¼ºè°ƒè‰²);
            background: rgba(var(--å¼ºè°ƒè‰²-rgb), 0.1);
            color: var(--å¼ºè°ƒè‰²) !important;
            border-radius: 30px;
            cursor: pointer;
            z-index: 1000;
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            font-weight: 600;
            letter-spacing: 0.5px;
            backdrop-filter: blur(6px);
            box-shadow: 
                0 4px 15px rgba(var(--å¼ºè°ƒè‰²-rgb), 0.15),
                0 0 0 1px rgba(255,255,255,0.1) inset;
            transform: translateZ(0);
            text-decoration: none;
            display: flex;
            align-items: center;
        }

        .è¿”å›æŒ‰é’®:hover {
            background: rgba(var(--å¼ºè°ƒè‰²-rgb), 0.2);
            transform: translateY(-2px) scale(1.05);
            box-shadow: 
                0 6px 25px rgba(var(--å¼ºè°ƒè‰²-rgb), 0.25),
                0 0 0 1px rgba(255,255,255,0.2) inset;
        }

        .è¿”å›æŒ‰é’®:active {
            transform: scale(0.95);
            transition-duration: 0.1s;
        }

        .è¿”å›æŒ‰é’®::before {
            content: "â†";
            display: inline-block;
            margin-right: 8px;
            font-size: 1.1em;
            transition: transform 0.3s ease;
        }

        .è¿”å›æŒ‰é’®:hover::before {
            transform: translateX(-3px);
        }

        [data-theme="dark"] .è¿”å›æŒ‰é’® {
            border-color: rgba(255,255,255,0.3);
            background: rgba(255,255,255,0.05);
            box-shadow: 
                0 4px 15px rgba(0,0,0,0.3),
                0 0 0 1px rgba(255,255,255,0.05) inset;
        }

        [data-theme="dark"] .è¿”å›æŒ‰é’®:hover {
            background: rgba(255,255,255,0.1);
            box-shadow: 
                0 6px 25px rgba(0,0,0,0.4),
                0 0 0 1px rgba(255,255,255,0.1) inset;
        }

        /* å“åº”å¼è°ƒæ•´ */
        @media (max-width: 768px) {
            .è¿”å›æŒ‰é’® {
                bottom: 15px;
                left: 15px;
                padding: 10px 15px;
                font-size: 14px;
            }
        }

        @media (max-width: 480px) {
            .è¿”å›æŒ‰é’® {
                bottom: 10px;
                left: 10px;
                padding: 8px 12px;
                font-size: 13px;
            }
            
            .è¿”å›æŒ‰é’®::before {
                margin-right: 5px;
            }
        }


    </style>
</head>
<!-- ä½¿ç”¨å®˜æ–¹CDN -->
<script src="https://d3js.org/d3.v7.min.js"></script>
<body>
    <a href="index.html" class="è¿”å›æŒ‰é’®">è¿”å›é¦–é¡µ</a>
    <div class="welcome-overlay" id="welcomeOverlay">
        <!-- ä¿ç•™ä¸ä¸»ç«™ä¸€è‡´çš„æ¬¢è¿ç•Œé¢ -->
    </div>

    <div class="main-content">
        <button class="ä¸»é¢˜åˆ‡æ¢" onclick="åˆ‡æ¢ä¸»é¢˜()">ğŸŒ“ åˆ‡æ¢æ¨¡å¼</button>
        
        <div class="å¡ç‰‡">
            <h1>ğŸ“ˆ è®¿é—®ç»Ÿè®¡</h1>
            <p>æœ€è¿‘7å¤©è®¿é—®é‡è¶‹åŠ¿</p>
            <div class="chart-container" id="chart"></div>
            <div class="tooltip" id="tooltip"></div>
        </div>
    </div>

    <script>
        // æ¨¡æ‹Ÿæ•°æ®ç”Ÿæˆ
        function generateData() {
            const data = [];
            const date = new Date();
            for(let i = 6; i >= 0; i--) {
                const d = new Date(date);
                d.setDate(date.getDate() - i);
                data.push({
                    date: d.toISOString().split('T')[0],
                    value: Math.floor(Math.random() * 300 + 200) // 200-500ä¹‹é—´çš„éšæœºæ•°
                });
            }
            return data;
        }

        // ç»˜åˆ¶ç»Ÿè®¡å›¾
        function drawChart() {
            const data = generateData();
            const container = document.getElementById('chart');
            const tooltip = document.getElementById('tooltip');
            
            // æ¸…ç©ºå®¹å™¨
            container.innerHTML = '<svg width="100%" height="100%"></svg>';
            const svg = d3.select('#chart svg');
            
            // è®¾ç½®å°ºå¯¸
            const width = container.clientWidth;
            const height = container.clientHeight;
            const margin = {top: 20, right: 30, bottom: 30, left: 40};
            
            // åˆ›å»ºæ¯”ä¾‹å°º
            const x = d3.scaleBand()
                .domain(data.map(d => d.date))
                .range([margin.left, width - margin.right])
                .padding(0.1);

            const y = d3.scaleLinear()
                .domain([0, d3.max(data, d => d.value)])
                .nice()
                .range([height - margin.bottom, margin.top]);

            // åˆ›å»ºåæ ‡è½´
            const xAxis = g => g
                .attr("transform", `translate(0,${height - margin.bottom})`)
                .call(d3.axisBottom(x).tickSizeOuter(0));

            const yAxis = g => g
                .attr("transform", `translate(${margin.left},0)`)
                .call(d3.axisLeft(y));

            // ç»˜åˆ¶æŠ˜çº¿
            const line = d3.line()
                .x(d => x(d.date) + x.bandwidth() / 2)
                .y(d => y(d.value))
                .curve(d3.curveMonotoneX);

            svg.append("g")
                .call(xAxis)
                .selectAll("text")
                .style("fill", "var(--æ–‡å­—è‰²)");

            svg.append("g")
                .call(yAxis)
                .selectAll("text")
                .style("fill", "var(--æ–‡å­—è‰²)");

            svg.append("path")
                .datum(data)
                .attr("class", "chart-line")
                .attr("d", line);

            // æ·»åŠ æ•°æ®ç‚¹
            svg.selectAll("circle")
                .data(data)
                .enter()
                .append("circle")
                .attr("class", "data-point")
                .attr("cx", d => x(d.date) + x.bandwidth() / 2)
                .attr("cy", d => y(d.value))
                .attr("r", 5)
                .attr("fill", "var(--å¼ºè°ƒè‰²)")
                .style("stroke", "var(--èƒŒæ™¯è‰²)")
                .style("stroke-width", 2)
                .on("mouseover", (event, d) => {
                    tooltip.style.opacity = 1;
                    tooltip.innerHTML = `${d.date}<br>è®¿é—®é‡: ${d.value}`;
                    tooltip.style.left = `${event.pageX}px`;
                    tooltip.style.top = `${event.pageY}px`;
                })
                .on("mousemove", (event) => {
                    tooltip.style.left = `${event.pageX}px`;
                    tooltip.style.top = `${event.pageY}px`;
                })
                .on("mouseout", () => {
                    tooltip.style.opacity = 0;
                });
        }

        // ä¸»é¢˜åˆ‡æ¢
        function åˆ‡æ¢ä¸»é¢˜() {
            const theme = document.body.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
            document.body.setAttribute('data-theme', theme);
            localStorage.setItem('theme', theme);
            drawChart(); // é‡æ–°ç»˜åˆ¶å›¾è¡¨ä»¥åº”ç”¨æ–°ä¸»é¢˜
        }

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', () => {
            const savedTheme = localStorage.getItem('theme') || 'light';
            document.body.setAttribute('data-theme', savedTheme);
            drawChart();
            setTimeout(() => document.body.classList.add('ready'), 100);
        });

        // çª—å£è°ƒæ•´æ—¶é‡æ–°ç»˜åˆ¶
        window.addEventListener('resize', drawChart);
    </script>
</body>
</html>
